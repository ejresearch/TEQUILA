{"ast":null,"code":"var _s = $RefreshSig$();\n// React hooks for weeks data management\nimport { useState, useEffect, useCallback } from 'react';\nimport api from '../api/client';\nexport function useWeeks() {\n  _s();\n  const [weeks, setWeeks] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Generate weeks data - check only Week 1 to determine if backend is connected\n  const loadWeeks = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const virtues = ['Courage', 'Wisdom', 'Justice', 'Temperance', 'Faith', 'Hope', 'Charity'];\n      const generatedWeeks = [];\n\n      // Quick check: only probe the first few weeks to see what exists\n      const existingWeeks = new Set();\n      const validatedWeeks = new Set();\n\n      // Check weeks 1-12 only (faster initial load)\n      for (let i = 1; i <= 12; i++) {\n        try {\n          await api.getCompiledWeekSpec(i);\n          existingWeeks.add(i);\n\n          // Try validation (don't await, fire and forget)\n          api.validateWeek(i).then(validation => {\n            if (validation.is_valid) {\n              validatedWeeks.add(i);\n            }\n          }).catch(() => {});\n        } catch (err) {\n          // Week doesn't exist, continue\n        }\n      }\n\n      // Generate all 35 weeks with status based on what we found\n      for (let i = 1; i <= 35; i++) {\n        generatedWeeks.push({\n          number: i,\n          virtue: virtues[(i - 1) % 7],\n          status: existingWeeks.has(i) ? 'completed' : 'pending',\n          lessonsCount: 4,\n          validated: validatedWeeks.has(i)\n        });\n      }\n      setWeeks(generatedWeeks);\n    } catch (err) {\n      // If backend isn't running, show all as pending\n      console.error('Backend not available:', err);\n      const virtues = ['Courage', 'Wisdom', 'Justice', 'Temperance', 'Faith', 'Hope', 'Charity'];\n      const fallbackWeeks = [];\n      for (let i = 1; i <= 35; i++) {\n        fallbackWeeks.push({\n          number: i,\n          virtue: virtues[(i - 1) % 7],\n          status: 'pending',\n          lessonsCount: 4,\n          validated: false\n        });\n      }\n      setWeeks(fallbackWeeks);\n      setError('Backend not connected. Start backend with: python -m src.app');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  const validateWeek = useCallback(async weekNumber => {\n    try {\n      const result = await api.validateWeek(weekNumber);\n\n      // Update local state\n      setWeeks(prev => prev.map(w => w.number === weekNumber ? {\n        ...w,\n        validated: result.is_valid\n      } : w));\n      return result;\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Validation failed');\n      return null;\n    }\n  }, []);\n  const exportWeek = useCallback(async weekNumber => {\n    try {\n      const result = await api.exportWeek(weekNumber);\n      return result;\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Export failed');\n      throw err;\n    }\n  }, []);\n  useEffect(() => {\n    loadWeeks();\n  }, [loadWeeks]);\n  return {\n    weeks,\n    loading,\n    error,\n    reload: loadWeeks,\n    validateWeek,\n    exportWeek\n  };\n}\n_s(useWeeks, \"fWaLSnsmqhXNTCQoB6WFuxcnh10=\");","map":{"version":3,"names":["useState","useEffect","useCallback","api","useWeeks","_s","weeks","setWeeks","loading","setLoading","error","setError","loadWeeks","virtues","generatedWeeks","existingWeeks","Set","validatedWeeks","i","getCompiledWeekSpec","add","validateWeek","then","validation","is_valid","catch","err","push","number","virtue","status","has","lessonsCount","validated","console","fallbackWeeks","weekNumber","result","prev","map","w","Error","message","exportWeek","reload"],"sources":["/Users/elle_jansick/steel/frontend/src/hooks/useWeeks.ts"],"sourcesContent":["// React hooks for weeks data management\nimport { useState, useEffect, useCallback } from 'react'\nimport api from '../api/client'\nimport type { Week, ValidationResult } from '../types'\n\nexport function useWeeks() {\n  const [weeks, setWeeks] = useState<Week[]>([])\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  // Generate weeks data - check only Week 1 to determine if backend is connected\n  const loadWeeks = useCallback(async () => {\n    setLoading(true)\n    setError(null)\n\n    try {\n      const virtues = ['Courage', 'Wisdom', 'Justice', 'Temperance', 'Faith', 'Hope', 'Charity']\n      const generatedWeeks: Week[] = []\n\n      // Quick check: only probe the first few weeks to see what exists\n      const existingWeeks = new Set<number>()\n      const validatedWeeks = new Set<number>()\n\n      // Check weeks 1-12 only (faster initial load)\n      for (let i = 1; i <= 12; i++) {\n        try {\n          await api.getCompiledWeekSpec(i)\n          existingWeeks.add(i)\n\n          // Try validation (don't await, fire and forget)\n          api.validateWeek(i).then(validation => {\n            if (validation.is_valid) {\n              validatedWeeks.add(i)\n            }\n          }).catch(() => {})\n        } catch (err) {\n          // Week doesn't exist, continue\n        }\n      }\n\n      // Generate all 35 weeks with status based on what we found\n      for (let i = 1; i <= 35; i++) {\n        generatedWeeks.push({\n          number: i,\n          virtue: virtues[(i - 1) % 7],\n          status: existingWeeks.has(i) ? 'completed' : 'pending',\n          lessonsCount: 4,\n          validated: validatedWeeks.has(i),\n        })\n      }\n\n      setWeeks(generatedWeeks)\n    } catch (err) {\n      // If backend isn't running, show all as pending\n      console.error('Backend not available:', err)\n      const virtues = ['Courage', 'Wisdom', 'Justice', 'Temperance', 'Faith', 'Hope', 'Charity']\n      const fallbackWeeks: Week[] = []\n      for (let i = 1; i <= 35; i++) {\n        fallbackWeeks.push({\n          number: i,\n          virtue: virtues[(i - 1) % 7],\n          status: 'pending',\n          lessonsCount: 4,\n          validated: false,\n        })\n      }\n      setWeeks(fallbackWeeks)\n      setError('Backend not connected. Start backend with: python -m src.app')\n    } finally {\n      setLoading(false)\n    }\n  }, [])\n\n  const validateWeek = useCallback(async (weekNumber: number): Promise<ValidationResult | null> => {\n    try {\n      const result = await api.validateWeek(weekNumber)\n\n      // Update local state\n      setWeeks(prev => prev.map(w =>\n        w.number === weekNumber\n          ? { ...w, validated: result.is_valid }\n          : w\n      ))\n\n      return result\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Validation failed')\n      return null\n    }\n  }, [])\n\n  const exportWeek = useCallback(async (weekNumber: number) => {\n    try {\n      const result = await api.exportWeek(weekNumber)\n      return result\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Export failed')\n      throw err\n    }\n  }, [])\n\n  useEffect(() => {\n    loadWeeks()\n  }, [loadWeeks])\n\n  return {\n    weeks,\n    loading,\n    error,\n    reload: loadWeeks,\n    validateWeek,\n    exportWeek,\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}